<!DOCTYPE html>
<html>
<!--
                       ::
                      :;J7, :,                        ::;7:
                      ,ivYi, ,                       ;LLLFS:
                      :iv7Yi                       :7ri;j5PL
                     ,:ivYLvr                    ,ivrrirrY2X,
                     :;r@Wwz.7r:                :ivu@kexianli.
                    :iL7::,:::iiirii:ii;::::,,irvF7rvvLujL7ur
                   ri::,:,::i:iiiiiii:i:irrv177JX7rYXqZEkvv17
                ;i:, , ::::iirrririi:i:::iiir2XXvii;L8OGJr71i
              :,, ,,:   ,::ir@mingyi.irii:i:::j1jri7ZBOS7ivv,
                 ,::,    ::rv77iiiriii:iii:i::,rvLq@huhao.Li
             ,,      ,, ,:ir7ir::,:::i;ir:::i:i::rSGGYri712:
           :::  ,v7r:: ::rrv77:, ,, ,:i7rrii:::::, ir7ri7Lri
          ,     2OBBOi,iiir;r::        ,irriiii::,, ,iv7Luur:
        ,,     i78MBBi,:,:::,:,  :7FSL: ,iriii:::i::,,:rLqXv::
        :      iuMMP: :,:::,:ii;2GY7OBB0viiii:i:iii:i:::iJqL;::
       ,     ::::i   ,,,,, ::LuBBu BBBBBErii:i:i:i:i:i:i:r77ii
      ,       :       , ,,:::rruBZ1MBBqi, :,,,:::,::::::iiriri:
     ,               ,,,,::::i:  @arqiao.       ,:,, ,:::ii;i7:
    :,       rjujLYLi   ,,:::::,:::::::::,,   ,:i,:,,,,,::i:iii
    ::      BBBBBBBBB0,    ,,::: , ,:::::: ,      ,,,, ,,:::::::
    i,  ,  ,8BMMBBBBBBi     ,,:,,     ,,, , ,   , , , :,::ii::i::
    :      iZMOMOMBBM2::::::::::,,,,     ,,,,,,:,,,::::i:irr:i:::,
    i   ,,:;u0MBMOG1L:::i::::::  ,,,::,   ,,, ::::::i:i:iirii:i:i:
    :    ,iuUuuXUkFu7i:iii:i:::, :,:,: ::::::::i:i:::::iirr7iiri::
    :     :rk@Yizero.i:::::, ,:ii:::::::i:::::i::,::::iirrriiiri::,
     :      5BMBBBBBBSr:,::rv2kuii:::iii::,:i:,, , ,,:,:i@petermu.,
          , :r50EZ8MBBBBGOBBBZP7::::i::,:::::,: :,:,::i;rrririiii::
              :jujYY7LS0ujJL7r::,::i::,::::::::::::::iirirrrrrrr:ii:
           ,:  :@kevensun.:,:,,,::::i:i:::::,,::::::iir;ii;7v77;ii;i,
           ,,,     ,,:,::::::i:iiiii:i::::,, ::::iiiir@xingjief.r;7:i,
        , , ,,,:,,::::::::iiiiiiiiii:,:,:::::::::iiir;ri7vL77rrirri::
         :,, , ::::::::i:::i:::i:i::,,,,,:,::i:i:::iir;@Secbone.ii:::
         
-->
<head>
<meta charset="utf-8">
<title>python重点回顾（5） &#8211; Sagittarius</title>
<meta name="description" content="Learning python 5">
<meta name="keywords" content="python">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="python重点回顾（5）">
<meta property="og:description" content="Learning python 5">
<meta property="og:url" content="http://jeffreywei.github.io/python/learning-python-5">
<meta property="og:site_name" content="Sagittarius">
<meta property="og:image" content="http://jeffreywei.github.io/images/Clouds.jpg">





<link rel="canonical" href="http://jeffreywei.github.io/python/learning-python-5">
<link href="http://jeffreywei.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Sagittarius Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Chrome Color -->
<meta name="theme-color" content="#db5945">

<!-- Windows8 Tile -->
<meta name="msapplication-TileColor" content="#db5945">
<meta name="msapplication-TileImage" content="http://jeffreywei.github.io/images/apple-touch-icon-144x144-precomposed.png">


    <link rel="stylesheet" type="text/css" href="http://cdn.bootcss.com/bootstrap/3.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="http://cdn.bootcss.com/font-awesome/4.2.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="http://jeffreywei.github.io/assets/css/style.css" />
    <link rel="stylesheet" type="text/css" href="http://cdn.bootcss.com/nprogress/0.1.6/nprogress.min.css" />

<div class="search-wrapper">
    <div class="search-form">
        <input type="text" class="search-field" placeholder="Search...">
        <i class="fa fa-times"></i>
        <ul class="search-results post-list"></ul><!-- /.search-results -->
    </div><!-- /.search-form -->
</div><!-- ./search-wrapper -->

<script type="text/javascript" src="http://cdn.bootcss.com/nprogress/0.1.6/nprogress.min.js"></script>
<script>NProgress.start();</script>




<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://jeffreywei.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://jeffreywei.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://jeffreywei.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://jeffreywei.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://jeffreywei.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://jeffreywei.github.io/images/apple-touch-icon-144x144-precomposed.png">

</head>
<body class="post-template" itemscope itemtype="http://schema.org/WebPage">
<div id="fade"></div>
<a id="slide" class="animated fade"></a>
<aside id="sidebar">
    <nav id="navigation">
    <h2>MENU</h2>
    <hr>

            <li>
                    <a href="http://jeffreywei.github.io/">Home</a>
                 </li>

            <li>
                    <a href="http://jeffreywei.github.io/categories">Categories</a>
                 </li>

            <li>
                    <a href="http://jeffreywei.github.io/tags">Tags</a>
                 </li>

            <li>
                    <a href="http://jeffreywei.github.io/guestbook">Guestbook</a>
                 </li>

            <li>
                    <a href="http://jeffreywei.github.io/project">Work</a>
                 </li>

            <li>
                    <a href="http://jeffreywei.github.io/links">Links</a>
                 </li>

            <li>
                    <a href="http://jeffreywei.github.io/about">About</a>
                 </li>

           <li><a href="http://jeffreywei.github.io/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss"></i> Feed</a></li>
    </nav>


</aside>

<header id="masthead" class="blog-background  align-center align-middle animated from-bottom"  style="background-image: url(http://jeffreywei.github.io/images/Clouds.jpg)" itemscope itemtype="http://schema.org/Organization">


    <button class="menu-button animated fade dosearch">
        <i class="fa fa-search"></i>
    </button>


    <div class="inner">
        <div class="container">
            <a class="brand" href="http://jeffreywei.github.io" role="banner" itemprop="url">

                <img itemprop="logo" src="http://jeffreywei.github.io/images/fa-paper-plane-o.png" alt="Sagittarius Logo" />

            <h1 class="blog-title light" itemprop="name">
                Sagittarius
            </h1>

            </a>
        </div>
    </div>
    
    
    <div class="decor-wrapper">
        <svg id="header-decor" class="decor bottom" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path>
            <path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path>

            <path class="medium left" d="M0 100 L50 50 L0 33.3" fill="rgba(255,255,255, .3)"></path>
            <path class="medium right" d="M100 100 L50 50 L100 33.3" fill="rgba(255,255,255, .3)"></path>

            <path class="small left" d="M0 100 L50 50 L0 66.6" fill="rgba(255,255,255, .5)"></path>
            <path class="small right" d="M100 100 L50 50 L100 66.6" fill="rgba(255,255,255, .5)"></path>

            <path d="M0 99.9 L50 49.9 L100 99.9 L0 99.9" fill="rgba(255,255,255, 1)"></path>

            <path d="M48 52 L50 49 L52 52 L48 52" fill="rgba(255,255,255, 1)"></path>

        </svg>
    </div>
    
</header>

<div id="main" class="content" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
    <div class="container">
        <div class="row">
            <article class="post col-md-8 col-md-offset-2 hentry" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
            
            
            
            
            
                    <header class="post-header entry-header">
                    
                        
                        <h1 class="post-title text-center hyper lighter bordered-bottom entry-title" itemprop="headline">python重点回顾（5）</h1>
                        
                        <div class="cursive" style="color: #000; font-style:italic;">Learning python 5</div>
                        <div class="post-info text-center small">
                            <span class="entry-date date published updated"><time datetime="2015-06-11T00:00:00+08:00" class="post-time" itemprop="datePublished">11 Jun 2015</time><span>
                            in <span class="post-tags"><a href="http://jeffreywei.github.io/categories/index.html#python" data-toggle="tooltip" title="Other posts from the Python category" rel="tag">Python</a></span>&nbsp;<span class="post-tags"><i class="fa fa-clock-o"></i>&nbsp;<span class="time">2.66</span> minutes read</span>
                        </div>
                    </header>
                    <div class="post-body bordered-bottom" itemprop="description">
                        
                        <div id="drawer"></div><div id="drawer"></div>
                        <p>python教程重点回顾-5-常用内建模块</p>

<!--more-->

<h2 id="section">常用内建模块</h2>
<p>###collections</p>

<p>1.namedtuple，命名元组</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">namedtuple</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">Point</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;Point&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span>
<span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>
<span class="mi">2</span>

<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Point</span><span class="p">)</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span>
<span class="bp">True</span>

<span class="c"># namedtuple(&#39;名称&#39;, [属性list]):</span>
<span class="n">Circle</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;Circle&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">])</span></code></pre></div>

<ol>
  <li>deque,双向列表</li>
</ol>

<p>使用list存储数据时，按索引访问元素很快，但是插入和删除元素就很慢了，因为<code>list是线性存储</code>，数据量大的时候，插入和删除效率很低。<code>deque</code>是为了高效实现<code>插入和删除操作的双向列表</code>，适合用于队列和栈：</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="n">deque</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">q</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">q</span>
<span class="n">deque</span><span class="p">([</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">])</span></code></pre></div>

<p>deque除了实现list的append()和pop()外，还支持appendleft()和popleft()，这样就可以非常高效地往头部添加或删除元素。</p>

<p>3.defaultdict,含默认值字典</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="err">使用</span><span class="nb">dict</span><span class="err">时，如果引用的</span><span class="n">Key</span><span class="err">不存在，就会抛出</span><span class="ne">KeyError</span><span class="err">。如果希望</span><span class="n">key</span><span class="err">不存在时，返回一个默认值，就可以用</span><span class="n">defaultdict</span><span class="err">：</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dd</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="s">&#39;N/A&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dd</span><span class="p">[</span><span class="s">&#39;key1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;abc&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dd</span><span class="p">[</span><span class="s">&#39;key1&#39;</span><span class="p">]</span> <span class="c"># key1存在</span>
<span class="s">&#39;abc&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dd</span><span class="p">[</span><span class="s">&#39;key2&#39;</span><span class="p">]</span> <span class="c"># key2不存在，返回默认值</span>
<span class="s">&#39;N/A&#39;</span></code></pre></div>

<p>4.OrderedDict，有序字典</p>

<p>使用dict时，Key是无序的。在对dict做迭代时，如果要<code>保持Key的顺序</code>，可以用<code>OrderedDict</code>：</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">([(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="c"># dict的Key是无序的</span>
<span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">od</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">([(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">od</span> <span class="c"># OrderedDict的Key是有序的</span>
<span class="n">OrderedDict</span><span class="p">([(</span><span class="s">&#39;a&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;c&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)])</span>

<span class="c">#注意，OrderedDict的Key会按照插入的顺序排列，不是Key本身排序：</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">od</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">od</span><span class="p">[</span><span class="s">&#39;z&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">od</span><span class="p">[</span><span class="s">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">od</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">od</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="c"># 按照插入的Key的顺序返回</span>
<span class="p">[</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="s">&#39;x&#39;</span><span class="p">]</span></code></pre></div>

<p>5.Counter,计数器</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s">&#39;programming&#39;</span><span class="p">:</span>
<span class="o">...</span>     <span class="n">c</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
<span class="o">...</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">c</span>
<span class="n">Counter</span><span class="p">({</span><span class="s">&#39;g&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;m&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;i&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;o&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;n&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&#39;p&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span></code></pre></div>

<h3 id="hashlib">hashlib</h3>
<p>1.MD5</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">hashlib</span>
<span class="n">md5</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
<span class="n">md5</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s">&#39;how to use md5 in python hashlib?&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">md5</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>


<span class="c">#如果数据量很大，可以分块多次调用update()，最后计算的结果是一样的</span>
<span class="n">md5</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
<span class="n">md5</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s">&#39;how to use md5 in &#39;</span><span class="p">)</span>
<span class="n">md5</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s">&#39;python hashlib?&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">md5</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span></code></pre></div>

<p>2.SHA1</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">hashlib</span>

<span class="n">sha1</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">sha1</span><span class="p">()</span>
<span class="n">sha1</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s">&#39;how to use sha1 in &#39;</span><span class="p">)</span>
<span class="n">sha1</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="s">&#39;python hashlib?&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="n">sha1</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span></code></pre></div>

<h3 id="itertools">itertools</h3>
<p>Python的内建模块<code>itertools</code>提供了非常有用的用于操作迭代对象的函数</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">itertools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">natuals</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">natuals</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">n</span>
<span class="o">...</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
<span class="o">...</span></code></pre></div>

<p>因为count()会创建一个无限的迭代器，所以上述代码会打印出自然数序列，根本停不下来，只能按Ctrl+C退出</p>

<p>cycle()会把传入的一个序列无限重复下去：</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">itertools</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">cs</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">cycle</span><span class="p">(</span><span class="s">&#39;ABC&#39;</span><span class="p">)</span> <span class="c"># 注意字符串也是序列的一种</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">c</span>
<span class="o">...</span>
<span class="s">&#39;A&#39;</span>
<span class="s">&#39;B&#39;</span>
<span class="s">&#39;C&#39;</span>
<span class="s">&#39;A&#39;</span>
<span class="s">&#39;B&#39;</span>
<span class="s">&#39;C&#39;</span>
<span class="o">...</span>


<span class="c">#repeat()负责把一个元素无限重复下去，不过如果提供第二个参数就可以限定重复次数</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">ns</span> <span class="o">=</span> <span class="n">itertools</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">n</span>
<span class="o">...</span>
<span class="err">打印</span><span class="mi">10</span><span class="err">次</span><span class="s">&#39;A&#39;</span>


<span class="c">#chain()可以把一组迭代对象串联起来，形成一个更大的迭代器：</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">chain</span><span class="p">(</span><span class="s">&#39;ABC&#39;</span><span class="p">,</span> <span class="s">&#39;XYZ&#39;</span><span class="p">):</span>
    <span class="k">print</span> <span class="n">c</span>
<span class="c"># 迭代效果：&#39;A&#39; &#39;B&#39; &#39;C&#39; &#39;X&#39; &#39;Y&#39; &#39;Z&#39;</span>


<span class="c">#groupby()把迭代器中相邻的重复元素挑出来放在一起：</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">&#39;AAABBBCCAAA&#39;</span><span class="p">):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">key</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="c"># 为什么这里要用list()函数呢？</span>
<span class="o">...</span>
<span class="n">A</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">]</span>
<span class="n">B</span> <span class="p">[</span><span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;B&#39;</span><span class="p">]</span>
<span class="n">C</span> <span class="p">[</span><span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;C&#39;</span><span class="p">]</span>
<span class="n">A</span> <span class="p">[</span><span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;A&#39;</span><span class="p">]</span>

<span class="c">#imap()和map()的区别在于，imap()可以作用于无穷序列，并且，如果两个序列的长度不一致，以短的那个为准。</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">imap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span> <span class="n">itertools</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="mi">1</span><span class="p">)):</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">x</span>
<span class="o">...</span>
<span class="mi">10</span>
<span class="mi">40</span>
<span class="mi">90</span>

<span class="c">#imap()返回一个迭代对象，而map()返回list。当你调用map()时，已经计算完毕：</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">r</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">r</span> <span class="c"># r已经计算出来了</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span></code></pre></div>

<h3 id="xml">XML</h3>
<p>当SAX解析器读到一个节点时：</p>

<pre><code>	&lt;a href="/"&gt;python&lt;/a&gt;
</code></pre>

<p>会产生3个事件：</p>

<p>start_element事件，在读取<a href="/">时；</a></p>

<p>char_data事件，在读取python时；</p>

<p>end_element事件，在读取&lt;/a&gt;时。</p>

<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">xml.parsers.expat</span> <span class="kn">import</span> <span class="n">ParserCreate</span>

<span class="k">class</span> <span class="nc">DefaultSaxHandler</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">start_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;sax:start_element: </span><span class="si">%s</span><span class="s">, attrs: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">attrs</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">end_element</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;sax:end_element: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">char_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;sax:char_data: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">text</span><span class="p">)</span>

<span class="n">xml</span> <span class="o">=</span> <span class="s">r&#39;&#39;&#39;&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="s">&lt;ol&gt;</span>
<span class="s">    &lt;li&gt;&lt;a href=&quot;/python&quot;&gt;Python&lt;/a&gt;&lt;/li&gt;</span>
<span class="s">    &lt;li&gt;&lt;a href=&quot;/ruby&quot;&gt;Ruby&lt;/a&gt;&lt;/li&gt;</span>
<span class="s">&lt;/ol&gt;</span>
<span class="s">&#39;&#39;&#39;</span>
<span class="n">handler</span> <span class="o">=</span> <span class="n">DefaultSaxHandler</span><span class="p">()</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">ParserCreate</span><span class="p">()</span>
<span class="n">parser</span><span class="o">.</span><span class="n">returns_unicode</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">parser</span><span class="o">.</span><span class="n">StartElementHandler</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">start_element</span>
<span class="n">parser</span><span class="o">.</span><span class="n">EndElementHandler</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">end_element</span>
<span class="n">parser</span><span class="o">.</span><span class="n">CharacterDataHandler</span> <span class="o">=</span> <span class="n">handler</span><span class="o">.</span><span class="n">char_data</span>
<span class="n">parser</span><span class="o">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span></code></pre></div>

<p>参考：<a href="http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000">python教程</a></p>

                        <br>
                        <hr>
                    <div class="copyleft">
                        <span class="cc">版权声明：作品原创-允许转载-保持署名 Wei</span>
                        <span class="post-url">
                            本文永久链接:
                            <a href="http://jeffreywei.github.io/python/learning-python-5">http://jeffreywei.github.io/python/learning-python-5</a>
                        </span>
                    </div>
                    
                    
                    <div class="entry-tags text-center">

                        <i class="fa fa-tags"></i>&nbsp;Tagged with <a href="http://jeffreywei.github.io/tags/index.html#python" data-toggle="tooltip" title="Posts tagged with python" rel="tag">python</a>

                    </div>
                    
                    </div>
                    <footer class="post-footer entry-meta">
                        <div class="post-share text-center">
    <p class="light small">
        Share this post
    </p>
    <ul class="social-mini">
        <li>
            <a href="https://twitter.com/intent/tweet?text=&quot;python重点回顾（5）&quot;%20http://jeffreywei.github.io/python/learning-python-5%20via%20&#64;"
            onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" data-toggle="tooltip" title="Share on Twitter" itemprop="Twitter">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        <li>
            <a  href="https://www.facebook.com/sharer/sharer.php?u=http://jeffreywei.github.io/python/learning-python-5"
            onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" data-toggle="tooltip" title="Share on Facebook" itemprop="Facebook">
                <i class="fa fa-facebook"></i>
            </a>
        </li>
        <li>
            <a href="https://plus.google.com/share?url=http://jeffreywei.github.io/python/learning-python-5"
           onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" data-toggle="tooltip" title="Share on Google plus" itemprop="GooglePlus">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
    </ul>
</div>

                        <div class="post-author text-center">
            <img src="http://jeffreywei.github.io/images/100.jpeg" alt="Wei's photo" itemprop="image" class="post-avatar img-circle img-responsive"/>
        <h4 class="bordered-bottom vcard author" itemprop="author" itemscope itemtype="http://schema.org/Person">By <span itemprop="name" class="fn"><a href="http://jeffreywei.github.io/about" title="About Wei" itemprop="url">Wei</a></span></h4>
        <p>自助者天助</p>
</div>

                        <nav class="pagination" role="navigation">
                        
                        <a class="newer-posts btn btn-danger btn-large" rel="prev" href="/python/learning-python-4" title="python重点回顾（4）">&larr; Previous Post</a>
                        
                        
                        <a class="older-posts btn btn-danger btn-large" rel="next" href="/life/life" title="今日事今日毕">Next Post &rarr;</a>
                        
                        </nav>
                        <br>
                        <div id="disqus_thread"></div><!-- /#disqus_thread -->
                        
						
						
                    </footer>
            </article>
        </div>
    </div>
</div>
    
<footer id="footer"  class="blog-background  text-center align-middle animated from-top" style="background-image: url(http://jeffreywei.github.io/images/Clouds.jpg)" >


    <div class="inner">
        <div class="container">

            <ul class="social-icons">
            
            
            
            
            
            
            
            <li>
                <a href="http://github.com/JeffreyWei" data-toggle="tooltip" title="Wei on Github" target="_blank">
                    <i class="fa fa-github"></i>
                </a>
            </li>
            
			
        </ul>
            <div>
                <a href="http://jeffreywei.github.io/about/">Wei</a> &copy; 2016 &bull; All rights reserved.
            </div>
            <ul class="menu-items">
            
            <li>
                
                    <a href="http://jeffreywei.github.io/"><i class="fa fa-home"></i></a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="http://jeffreywei.github.io/categories"><i class="fa fa-bars"></i></a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="http://jeffreywei.github.io/tags"><i class="fa fa-tags"></i></a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="http://jeffreywei.github.io/guestbook"><i class="fa fa-comments"></i></a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="http://jeffreywei.github.io/project"><i class="fa fa-code"></i></a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="http://jeffreywei.github.io/links"><i class="fa fa-link"></i></a>&nbsp;&bull;
                
            </li>
            
            <li>
                
                    <a href="http://jeffreywei.github.io/about"><i class="fa fa-user"></i></a>&nbsp;&bull;
                
            </li>
            
            <li><a href="http://jeffreywei.github.io/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss"></i> Feed</a></li>
        </ul>
        </div>
    </div>
    
        <div class="decor-wrapper">
            <svg id="footer-decor" class="decor top" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 100 100" preserveAspectRatio="none">

                <path class="large left" d="M0 0 L50 50 L0 100" fill="rgba(255,255,255, .1)"></path>
                <path class="large right" d="M100 0 L50 50 L100 100" fill="rgba(255,255,255, .1)"></path>

                <path class="medium left" d="M0 0 L50 50 L0 66.6" fill="rgba(255,255,255, .3)"></path>
                <path class="medium right" d="M100 0 L50 50 L100 66.6" fill="rgba(255,255,255, .3)"></path>

                <path class="small left" d="M0 0 L50 50 L0 33.3" fill="rgba(255,255,255, .5)"></path>
                <path class="small right" d="M100 0 L50 50 L100 33.3" fill="rgba(255,255,255, .5)"></path>

                <path d="M0 0 L50 50 L100 0 L0 0" fill="rgba(255,255,255, 1)"></path>

                <path d="M48 48 L50 51 L52 48 L48 48" fill="rgba(255,255,255, 1)"></path>

            </svg>
        </div>
    
</footer>


    <script src="http://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"><\/script>')</script>
<script src="http://jeffreywei.github.io/assets/js/scripts.min.js"></script>
<script type="text/javascript" src="http://jeffreywei.github.io/assets/js/waypoints.min.js"></script>
<script type="text/javascript" src="http://jeffreywei.github.io/assets/js/script.js"></script>
<script type='text/javascript'>console.log("HMFaysal Omega Theme Version 2.0");</script>
<script type='text/javascript'>console.log("https://alum.mit.edu/www/hmfaysal");</script>
<script type='text/javascript'>$(document).ready(function(){$(".time").text(function(a,b){return Math.round(parseFloat(b))})});</script>

<script type="text/javascript">

/*      Slides       */

$("a#slide").click(function(){
    $("#sidebar,body,a#slide,#fade").addClass("slide")
});

$("#fade,#header,#posts-container").click(function(){
    $("#sidebar,body,a#slide,#fade").removeClass("slide")
});

$("a#click-filter").click(function(){
    $("#slide-filter").slideToggle("medium");
    $("#slide-pages").slideOut("medium");
});

$("a#click-pages").click(function(){
    $("#slide-pages").slideToggle("medium");
    $("#slide-filter").slideOut("medium");
});

/*      End-Slides      */

</script>


<!-- Jekyll Simple Search option -->
<script>
  $(document).ready(function() {
      $('.search-field').simpleJekyllSearch({
          jsonFile : 'http://jeffreywei.github.io/search.json',
          searchResults : '.search-results',
          template : '<li><article><a href="{url}">{title} <span class="entry-date"><time datetime="{date}">{shortdate}</time></span></a></article></li>',
          noResults: '<p>Nothing found.</p>'
        });
  });

  (function( $, window, undefined ) {

     var bs = {
          close: $(".fa-times"),
          searchform: $(".search-form"),
          canvas: $("body"),
          dothis: $('.dosearch')
      };

    bs.dothis.on('click', function() {
      $('.search-wrapper').css({ display: "block" });
      bs.searchform.toggleClass('active');
      bs.searchform.find('input').focus();
      bs.canvas.toggleClass('search-overlay');
    });

      bs.close.on('click', function() {
        $('.search-wrapper').removeAttr( 'style' );
        bs.searchform.toggleClass('active');
        bs.canvas.removeClass('search-overlay');
    });
  })( jQuery, window );
</script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42739557-1', 'auto');
  ga('send', 'pageview');
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'jeffreywei'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




<script>NProgress.done();</script>


    <script type="text/javascript">
// https://github.com/ghiculescu/jekyll-table-of-contents
(function($){
  $.fn.toc = function(options) {
    var defaults = {
      noBackToTopLinks: false,
      title: '<i>Jump to...</i>',
      minimumHeaders: 3,
      headers: 'h1, h2, h3, h4, h5, h6',
      listType: 'ul', // values: [ol|ul]
      showEffect: 'show', // values: [show|slideDown|fadeIn|none]
      showSpeed: 'slow' // set to 0 to deactivate effect
    },
    settings = $.extend(defaults, options);

    var headers = $(settings.headers).filter(function() {
      // get all headers with an ID
      var previousSiblingName = $(this).prev().attr( "name" );
      if (!this.id && previousSiblingName) {
        this.id = $(this).attr( "id", previousSiblingName.replace(/\./g, "-") );
      }
      return this.id;
    }), output = $(this);
    if (!headers.length || headers.length < settings.minimumHeaders || !output.length) {
      return;
    }

    if (0 === settings.showSpeed) {
      settings.showEffect = 'none';
    }

    var render = {
      show: function() { output.hide().html(html).show(settings.showSpeed); },
      slideDown: function() { output.hide().html(html).slideDown(settings.showSpeed); },
      fadeIn: function() { output.hide().html(html).fadeIn(settings.showSpeed); },
      none: function() { output.html(html); }
    };

    var get_level = function(ele) { return parseInt(ele.nodeName.replace("H", ""), 10); }
    var highest_level = headers.map(function(_, ele) { return get_level(ele); }).get().sort()[0];
    var return_to_top = '<i class="icon-arrow-up back-to-top"> </i>';

    var level = get_level(headers[0]),
      this_level,
      html = settings.title + " <"+settings.listType+">";
    headers.on('click', function() {
      if (!settings.noBackToTopLinks) {
        window.location.hash = this.id;
      }
    })
    .addClass('clickable-header')
    .each(function(_, header) {
      this_level = get_level(header);
      if (!settings.noBackToTopLinks && this_level === highest_level) {
        $(header).addClass('top-level-header').after(return_to_top);
      }
      if (this_level === level) // same level as before; same indenting
        html += "<li><a href='#" + header.id + "'>" + header.innerHTML + "</a>";
      else if (this_level <= level){ // higher level than before; end parent ol
        for(i = this_level; i < level; i++) {
          html += "</li></"+settings.listType+">"
        }
        html += "<li><a href='#" + header.id + "'>" + header.innerHTML + "</a>";
      }
      else if (this_level > level) { // lower level than before; expand the previous to contain a ol
        for(i = this_level; i > level; i--) {
          html += "<"+settings.listType+"><li>"
        }
        html += "<a href='#" + header.id + "'>" + header.innerHTML + "</a>";
      }
      level = this_level; // update for the next one
    });
    html += "</"+settings.listType+">";
    if (!settings.noBackToTopLinks) {
      $(document).on('click', '.back-to-top', function() {
        $(window).scrollTop(0);
        window.location.hash = '';
      });
    }

    render[settings.showEffect]();
  };
})(jQuery);
</script>
<script type="text/javascript">
$(document).ready(function() {
    $('#drawer').toc();
});
</script>

</body>
</html>
